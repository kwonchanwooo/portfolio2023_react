{"ast":null,"code":"import _toConsumableArray from\"/Users/home/20230108/\\u1105\\u1175\\u110B\\u1162\\u11A8\\u1110\\u1173 \\u1111\\u1169\\u1110\\u1173\\u1111\\u1169\\u11AF\\u1105\\u1175\\u110B\\u1169/node_modules/@babel/runtime/helpers/esm/toConsumableArray.js\";import _slicedToArray from\"/Users/home/20230108/\\u1105\\u1175\\u110B\\u1162\\u11A8\\u1110\\u1173 \\u1111\\u1169\\u1110\\u1173\\u1111\\u1169\\u11AF\\u1105\\u1175\\u110B\\u1169/node_modules/@babel/runtime/helpers/esm/slicedToArray.js\";import React,{useEffect,useRef,useState}from'react';import Layout from'../commoon/Layout';import{jsx as _jsx}from\"react/jsx-runtime\";import{jsxs as _jsxs}from\"react/jsx-runtime\";import{Fragment as _Fragment}from\"react/jsx-runtime\";function Community(){var getLocalData=function getLocalData(){var data=localStorage.getItem('post');return JSON.parse(data);};var input=useRef(null);var textarea=useRef(null);var inputEdit=useRef(null);var textareaEdit=useRef(null);var _useState=useState(getLocalData()),_useState2=_slicedToArray(_useState,2),Posts=_useState2[0],setPosts=_useState2[1];var _useState3=useState(true),_useState4=_slicedToArray(_useState3,2),Allowed=_useState4[0],setAllowed=_useState4[1];var resetForm=function resetForm(){input.current.value='';textarea.current.value='';};var createPost=function createPost(){if(!input.current.value.trim()||!textarea.current.value.trim()){resetForm();return alert('제목과 본문을 모두 입력하세요.');}setPosts([{title:input.current.value,content:textarea.current.value}].concat(_toConsumableArray(Posts)));resetForm();};var deletePost=function deletePost(delIndex){if(!window.confirm('해당 게시글을 삭제하겠습니까?'))return;setPosts(Posts.filter(function(_,postIndex){return postIndex!==delIndex;}));};var enableUpdate=function enableUpdate(editIndex){if(!Allowed)return;setPosts(Posts.map(function(post,postIndex){if(postIndex===editIndex)post.enableUpdate=true;return post;}));setAllowed(false);};var disableUpdate=function disableUpdate(editIndex){setPosts(Posts.map(function(post,postIndex){if(postIndex===editIndex)post.enableUpdate=false;return post;}));setAllowed(true);};var updatePost=function updatePost(updateIndex){if(!inputEdit.current.value.trim()||!textareaEdit.current.value.trim()){return alert('수정할 제목과 본문을 모두 입력하세요.');}setPosts(Posts.map(function(post,postIndex){if(postIndex===updateIndex){post.title=inputEdit.current.value;post.content=textareaEdit.current.value;post.enableUpdate=false;}return post;}));setAllowed(true);};useEffect(function(){localStorage.setItem('post',JSON.stringify(Posts));},[Posts]);return/*#__PURE__*/_jsxs(Layout,{name:'Community',children:[/*#__PURE__*/_jsxs(\"div\",{className:\"inputBox\",children:[/*#__PURE__*/_jsx(\"input\",{type:\"text\",placeholder:\"\\uC81C\\uBAA9\\uC744 \\uC785\\uB825\\uD558\\uC138\\uC694\",ref:input}),/*#__PURE__*/_jsx(\"br\",{}),/*#__PURE__*/_jsx(\"textarea\",{cols:\"30\",rows:\"3\",placeholder:\"\\uBCF8\\uBB38\\uC744 \\uC785\\uB825\\uD558\\uC138\\uC694.\",ref:textarea}),/*#__PURE__*/_jsx(\"br\",{}),/*#__PURE__*/_jsxs(\"div\",{className:\"btnSet\",children:[/*#__PURE__*/_jsx(\"button\",{onClick:resetForm,children:\"CANCEL\"}),/*#__PURE__*/_jsx(\"button\",{onClick:createPost,children:\"WRITE\"})]})]}),/*#__PURE__*/_jsx(\"div\",{className:\"showBox\",children:Posts.map(function(post,idx){return/*#__PURE__*/_jsx(\"article\",{children:post.enableUpdate?/*#__PURE__*/_jsxs(_Fragment,{children:[/*#__PURE__*/_jsxs(\"div\",{className:\"txt\",children:[/*#__PURE__*/_jsx(\"input\",{type:\"text\",defaultValue:post.title,ref:inputEdit}),/*#__PURE__*/_jsx(\"br\",{}),/*#__PURE__*/_jsx(\"textarea\",{cols:\"30\",rows:\"3\",defaultValue:post.content,ref:textareaEdit})]}),/*#__PURE__*/_jsxs(\"div\",{className:\"btnSet\",children:[/*#__PURE__*/_jsx(\"button\",{onClick:function onClick(){return disableUpdate(idx);},children:\"CANCEL\"}),/*#__PURE__*/_jsx(\"button\",{onClick:function onClick(){return updatePost(idx);},children:\"UPDATE\"})]})]}):/*#__PURE__*/_jsxs(_Fragment,{children:[/*#__PURE__*/_jsxs(\"div\",{className:\"txt\",children:[/*#__PURE__*/_jsx(\"h2\",{children:post.title}),/*#__PURE__*/_jsx(\"p\",{children:post.content})]}),/*#__PURE__*/_jsxs(\"div\",{className:\"btnSet\",children:[/*#__PURE__*/_jsx(\"button\",{onClick:function onClick(){return enableUpdate(idx);},children:\"EDIT\"}),/*#__PURE__*/_jsx(\"button\",{onClick:function onClick(){return deletePost(idx);},children:\"DELETE\"})]})]})},idx);})})]});}export default Community;","map":{"version":3,"names":["React","useEffect","useRef","useState","Layout","Community","getLocalData","data","localStorage","getItem","JSON","parse","input","textarea","inputEdit","textareaEdit","Posts","setPosts","Allowed","setAllowed","resetForm","current","value","createPost","trim","alert","title","content","deletePost","delIndex","window","confirm","filter","_","postIndex","enableUpdate","editIndex","map","post","disableUpdate","updatePost","updateIndex","setItem","stringify","idx"],"sources":["/Users/home/20230108/리액트 포트폴리오/src/components/sub/Community.js"],"sourcesContent":["import React, { useEffect, useRef, useState } from 'react';\nimport Layout from '../commoon/Layout';\n\nfunction Community() {\n\tconst getLocalData = () => {\n\t\tconst data = localStorage.getItem('post');\n\t\treturn JSON.parse(data);\n\t};\n\n\tconst input = useRef(null);\n\tconst textarea = useRef(null);\n\tconst inputEdit = useRef(null);\n\tconst textareaEdit = useRef(null);\n\tconst [Posts, setPosts] = useState(getLocalData());\n\tconst [Allowed, setAllowed] = useState(true);\n\n\tconst resetForm = () => {\n\t\tinput.current.value = '';\n\t\ttextarea.current.value = '';\n\t};\n\n\tconst createPost = () => {\n\t\tif (!input.current.value.trim() || !textarea.current.value.trim()) {\n\t\t\tresetForm();\n\t\t\treturn alert('제목과 본문을 모두 입력하세요.');\n\t\t}\n\t\tsetPosts([{ title: input.current.value, content: textarea.current.value }, ...Posts]);\n\t\tresetForm();\n\t};\n\n\tconst deletePost = (delIndex) => {\n\t\tif (!window.confirm('해당 게시글을 삭제하겠습니까?')) return;\n\t\tsetPosts(Posts.filter((_, postIndex) => postIndex !== delIndex));\n\t};\n\n\tconst enableUpdate = (editIndex) => {\n\t\tif (!Allowed) return;\n\t\tsetPosts(\n\t\t\tPosts.map((post, postIndex) => {\n\t\t\t\tif (postIndex === editIndex) post.enableUpdate = true;\n\t\t\t\treturn post;\n\t\t\t})\n\t\t);\n\n\t\tsetAllowed(false);\n\t};\n\n\tconst disableUpdate = (editIndex) => {\n\t\tsetPosts(\n\t\t\tPosts.map((post, postIndex) => {\n\t\t\t\tif (postIndex === editIndex) post.enableUpdate = false;\n\t\t\t\treturn post;\n\t\t\t})\n\t\t);\n\t\tsetAllowed(true);\n\t};\n\n\tconst updatePost = (updateIndex) => {\n\t\tif (!inputEdit.current.value.trim() || !textareaEdit.current.value.trim()) {\n\t\t\treturn alert('수정할 제목과 본문을 모두 입력하세요.');\n\t\t}\n\n\t\tsetPosts(\n\t\t\tPosts.map((post, postIndex) => {\n\t\t\t\tif (postIndex === updateIndex) {\n\t\t\t\t\tpost.title = inputEdit.current.value;\n\t\t\t\t\tpost.content = textareaEdit.current.value;\n\t\t\t\t\tpost.enableUpdate = false;\n\t\t\t\t}\n\t\t\t\treturn post;\n\t\t\t})\n\t\t);\n\n\t\tsetAllowed(true);\n\t};\n\n\tuseEffect(() => {\n\t\tlocalStorage.setItem('post', JSON.stringify(Posts));\n\t}, [Posts]);\n\n\treturn (\n\t\t<Layout name={'Community'}>\n\t\t\t<div className='inputBox'>\n\t\t\t\t<input type='text' placeholder='제목을 입력하세요' ref={input} />\n\t\t\t\t<br />\n\t\t\t\t<textarea cols='30' rows='3' placeholder='본문을 입력하세요.' ref={textarea}></textarea>\n\t\t\t\t<br />\n\n\t\t\t\t<div className='btnSet'>\n\t\t\t\t\t<button onClick={resetForm}>CANCEL</button>\n\t\t\t\t\t<button onClick={createPost}>WRITE</button>\n\t\t\t\t</div>\n\t\t\t</div>\n\n\t\t\t<div className='showBox'>\n\t\t\t\t{Posts.map((post, idx) => {\n\t\t\t\t\treturn (\n\t\t\t\t\t\t<article key={idx}>\n\t\t\t\t\t\t\t{post.enableUpdate ? (\n\t\t\t\t\t\t\t\t<>\n\t\t\t\t\t\t\t\t\t<div className='txt'>\n\t\t\t\t\t\t\t\t\t\t<input type='text' defaultValue={post.title} ref={inputEdit} />\n\t\t\t\t\t\t\t\t\t\t<br />\n\t\t\t\t\t\t\t\t\t\t<textarea\n\t\t\t\t\t\t\t\t\t\t\tcols='30'\n\t\t\t\t\t\t\t\t\t\t\trows='3'\n\t\t\t\t\t\t\t\t\t\t\tdefaultValue={post.content}\n\t\t\t\t\t\t\t\t\t\t\tref={textareaEdit}\n\t\t\t\t\t\t\t\t\t\t></textarea>\n\t\t\t\t\t\t\t\t\t</div>\n\n\t\t\t\t\t\t\t\t\t<div className='btnSet'>\n\t\t\t\t\t\t\t\t\t\t<button onClick={() => disableUpdate(idx)}>CANCEL</button>\n\t\t\t\t\t\t\t\t\t\t<button onClick={() => updatePost(idx)}>UPDATE</button>\n\t\t\t\t\t\t\t\t\t</div>\n\t\t\t\t\t\t\t\t</>\n\t\t\t\t\t\t\t) : (\n\t\t\t\t\t\t\t\t<>\n\t\t\t\t\t\t\t\t\t<div className='txt'>\n\t\t\t\t\t\t\t\t\t\t<h2>{post.title}</h2>\n\t\t\t\t\t\t\t\t\t\t<p>{post.content}</p>\n\t\t\t\t\t\t\t\t\t</div>\n\n\t\t\t\t\t\t\t\t\t<div className='btnSet'>\n\t\t\t\t\t\t\t\t\t\t<button onClick={() => enableUpdate(idx)}>EDIT</button>\n\t\t\t\t\t\t\t\t\t\t<button onClick={() => deletePost(idx)}>DELETE</button>\n\t\t\t\t\t\t\t\t\t</div>\n\t\t\t\t\t\t\t\t</>\n\t\t\t\t\t\t\t)}\n\t\t\t\t\t\t</article>\n\t\t\t\t\t);\n\t\t\t\t})}\n\t\t\t</div>\n\t\t</Layout>\n\t);\n}\n\nexport default Community;\n"],"mappings":"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"},"metadata":{},"sourceType":"module","externalDependencies":[]}